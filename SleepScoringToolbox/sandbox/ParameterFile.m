function [params] = ParameterFile()
% ParameterFile - Helper function to hold Parameter Data
%
% Usage:
%   >> ParameterFile()  
%
% Inputs:
%   <none>
%
% Outputs:
%   params          - struct containg all analysis parameters 
%
% See also: 
%
% Copyright (C) 2010 by David Devilbiss <ddevilbiss@wisc.edu>
% Rev. 1.0 Inital parameter settings

% parms changed DClimitValue,logical rules, artifact algorithm

%Default File Parameters
params.File.SampleHz = 1000;
params.File.CompareScorings = true; %[default off] Use to comepare scorings of a previous human coded stages in file
%human scoring intervals from nexFile
%params.File.humanScoringIntervals = {'UNK_int','AW_int','QW_int','DS1_int','DS2_int','REM_int';...
%                                      0,5,4,3,2,1};

params.File.humanScoringIntervals = {'Desynch_int_start', 'Intermed_int_start', 'Synch_int_start'; 5,4,2};
                                  
%Artifact Detection Parameters
params.Artifact.algorithm = 'full'; %{'rms','full','none'}
params.Artifact.rm2Zero = true;
params.Artifact.RMSMultiplier = 5; %Detect > X times RMS; 1.75 * 2 delta only
params.Artifact.DClimit = 'std'; % {'std','mV'} This is the type of DC threshold to use
params.Artifact.DClimitValue = 3.5;% [default 3.9] Standard deviations. Additionslly one would put a mV value if a DC limit were used
params.Artifact.dvValMultiplier = .8; %Original 0.45%Jump DC limit as a function of: dvValMultiplier*DClimitValue or std(signal) << this wants to be a fraction of DC Threshold
params.Artifact.MinArtifactDuration = 0.25; %0.25orig in seconds >>>  code will expand all artifacts to have at least this length
params.Artifact.CombineArtifactTimeThreshold = 0.2; %NLeng changed from1 %in Sec. Combine artifacts that occur less than this time window
params.Artifact.MaxDT = 4; %Maximum duration (change in time (samples)) that it takes signal to artifact
params.Artifact.DropOutDT = 30; %Maximum duration (change in time (samples)) that the signal is permitted to be flat
params.Artifact.plot = true; %[default off]

%SleepScore Detection Parameters
params.Scoring.useNormByEpoch = true;
params.Scoring.useTemporalMedianFilter = false;
params.Scoring.ScoringType = 'GMMLOGSPECTRUM'; %{'Delta','DECISIONTREE','ICA','GMMRatio','GMMlogSpectrum'}
params.Scoring.FFTEpoch = 0.1; %0.25  used as Seconds to score data Sleep score interval %Ning Leng Changes it to 6
params.Scoring.WinOffset = 0; % as Seconds for sliding window/FFT overlap 
params.Scoring.HzDiv = 0.5; %Hz divisions/bins in spectrum. Slightly slower than nexpow2 but we know what each bin is
params.Scoring.StageEpoch = 5; % 10 (Seconds) Currently used as FFT Window, 
params.Scoring.zDeltaThreshold = 0.1; %used for Delta scoring (This is the alpha of the signal power: i.e. 0.05)
%params.Scoring.minStateLength = 1;
%params.Scoring.maxStateAnnealDist = 0.0033; %<< not used
params.Scoring.FFTvalidData = 50; % Cutoff for percent of cvalid data after artifacts removed
params.Scoring.plot = true; %[default off]

% Logical Rules 
% The algorithm applies these rules to try to find  appropiate states. If
% it meets no criteria, it employes one of seceral strategies (i.e. winner
% take all). The default is the average state.
params.rules.AW.PercentOfStageEpoch = 90; 
params.rules.QW.PercentOfStageEpoch = 90; %DMD was 60.  (2013Jul19)
params.rules.SWS1.PercentOfStageEpoch = 60;  %DMD was 30.  (2013Jul19)
params.rules.SWS2.PercentOfStageEpoch = 60; %>= percent of FFTEpocs to be scored in a Stage Epoch to be called SWS2
params.rules.PS.PercentOfStageEpoch = 50; 
params.rules.UNK.PercentOfStageEpoch = 100;
params.rules.minStateLength = 10; %(seconds) this is rounded to the nearest params.Scoring.StageEpoch

%Archetecture rules << broken
params.rules.ApplyArchitectureRules = true;

% Stimululs blanking window
params.StimWindow.Xmin = 0.005; %seconds 
params.StimWindow.Xmax = 0.33; %seconds, for regular stimulus artifacts;

% % Intervals which include many blankIDX set to unknown < old nLeng Fail code.
% params.Unknown=0.47; %0.3
% params.Outlier=1.5;%1.5 for regular

if params.StimWindow.Xmax < params.Artifact.MinArtifactDuration
     warndlg('Minimum Artifact Duration > Stimulus Blanking Window. This makes little sense', 'Paramater Warning Dialog');
end

% GMM starting point 
params.Scoring.useGMMinit = false;
params.Scoring.GMMinit.mu = [0.00802268820916561,0.0114622729146903,0.0105372978208205,0.00633325276537176,0.00245281481355860,0.000898388901829252,0.000344317457898417,8.19093289475575e-05,2.77466542131724e-05;0.00612710215919150,0.00842113360997373,0.00741269537558056,0.00506371167533013,0.00263993952476115,0.00141476201202206,0.000518775749153345,0.000122638853652757,3.36616207792511e-05;0.00387572956534682,0.00550674951897079,0.00528816437703585,0.00370719098924763,0.00184967109074868,0.000596894200262122,0.000244287900238998,7.90518400876359e-05,2.75418068501420e-05;0.00302181133604580,0.00383043507728869,0.00283533226572688,0.00143266216765922,0.000821879016943202,0.000549130748059079,0.000291073199862022,8.15262531437940e-05,3.03672612551106e-05;0.00142023316734775,0.00152633650467722,0.00120564378855674,0.000763197666309891,0.000444202422621778,0.000224641670804853,0.000127498966129053,7.15812342263568e-05,3.30426645292311e-05;];
params.Scoring.GMMinit.Sigma(:,:,1) = [8.49134570309226e-06,8.79247259830608e-06,5.63239973225528e-06,1.88337208897390e-06,2.12258789120385e-07,-4.46183307295150e-08,-3.74286319541469e-08,-1.83353708258278e-08,-6.50723895430486e-09;8.79247259830608e-06,1.39843975500343e-05,1.26457347474393e-05,5.65599972112293e-06,6.24326229527427e-07,5.33245879872988e-08,2.45317627605678e-08,-2.70880097127942e-10,-7.79796414772792e-09;5.63239973225528e-06,1.26457347474393e-05,1.47077101518528e-05,8.56423578463074e-06,1.18494751442821e-06,2.47619313661288e-07,9.33697917988097e-08,2.05657796579360e-08,-4.27522483087467e-09;1.88337208897390e-06,5.65599972112293e-06,8.56423578463074e-06,6.88879074461757e-06,1.34515130431724e-06,3.14278113357813e-07,8.10974345956598e-08,1.80626432768132e-08,2.15529507338017e-10;2.12258789120385e-07,6.24326229527427e-07,1.18494751442821e-06,1.34515130431724e-06,5.86392234180100e-07,1.24165347397166e-07,2.51097452307202e-08,3.88360723034101e-09,6.11508280223123e-10;-4.46183307295150e-08,5.33245879872988e-08,2.47619313661288e-07,3.14278113357813e-07,1.24165347397166e-07,7.05537715918140e-08,2.07160288048118e-08,3.36837105702531e-09,3.58090445393848e-10;-3.74286319541469e-08,2.45317627605678e-08,9.33697917988097e-08,8.10974345956598e-08,2.51097452307202e-08,2.07160288048118e-08,1.58045996710376e-08,2.10644818576211e-09,2.36058743960409e-10;-1.83353708258278e-08,-2.70880097127942e-10,2.05657796579360e-08,1.80626432768132e-08,3.88360723034101e-09,3.36837105702531e-09,2.10644818576211e-09,4.97021063478905e-10,4.56992034783108e-11;-6.50723895430486e-09,-7.79796414772792e-09,-4.27522483087467e-09,2.15529507338017e-10,6.11508280223123e-10,3.58090445393848e-10,2.36058743960409e-10,4.56992034783108e-11,2.27730099763230e-11;];
params.Scoring.GMMinit.Sigma(:,:,2) = [8.30263344303104e-06,9.09389170376479e-06,5.38822741003025e-06,1.25833799807154e-06,5.41684509192906e-08,-1.12286140455011e-07,2.78581857989797e-07,6.87372513266446e-09,6.64946016817322e-09;9.09389170376479e-06,1.25472757347223e-05,9.84540918739503e-06,4.56155896148924e-06,1.13823659083932e-06,2.33452256192066e-07,4.04921507083701e-07,8.29144233897335e-09,7.82990379169414e-09;5.38822741003025e-06,9.84540918739503e-06,1.02388869949781e-05,6.69248962896967e-06,2.08436236378601e-06,6.38040262646296e-07,3.25857589723290e-07,-4.08980718140652e-09,7.18698411730893e-09;1.25833799807154e-06,4.56155896148924e-06,6.69248962896967e-06,6.46322844562182e-06,2.87604087749877e-06,7.10668293838993e-07,1.18016189160370e-07,-1.91098155912902e-08,1.98789622991242e-09;5.41684509192906e-08,1.13823659083932e-06,2.08436236378601e-06,2.87604087749877e-06,2.05067683019371e-06,4.00806138505491e-07,7.77721288006628e-09,-1.33603840836071e-08,-1.16929891653326e-09;-1.12286140455011e-07,2.33452256192066e-07,6.38040262646296e-07,7.10668293838993e-07,4.00806138505491e-07,4.28696339281615e-07,9.32717440982032e-08,-6.05348724103567e-09,-1.13534762388112e-09;2.78581857989797e-07,4.04921507083701e-07,3.25857589723290e-07,1.18016189160370e-07,7.77721288006628e-09,9.32717440982032e-08,7.28634988898956e-08,2.14539410208032e-09,1.52714357825710e-10;6.87372513266446e-09,8.29144233897335e-09,-4.08980718140652e-09,-1.91098155912902e-08,-1.33603840836071e-08,-6.05348724103567e-09,2.14539410208032e-09,1.23821426118759e-09,7.45169413427268e-11;6.64946016817322e-09,7.82990379169414e-09,7.18698411730893e-09,1.98789622991242e-09,-1.16929891653326e-09,-1.13534762388112e-09,1.52714357825710e-10,7.45169413427268e-11,6.18833204777446e-11;];
params.Scoring.GMMinit.Sigma(:,:,3) = [3.36750430381250e-06,3.65213084654735e-06,2.48120164482384e-06,1.08072643597787e-06,6.15062544742349e-07,3.01722082759326e-07,9.09101101100596e-08,7.13226536233542e-09,-1.91160904149773e-09;3.65213084654735e-06,5.10205822345995e-06,4.35548336489569e-06,2.18302439043424e-06,8.95175259670608e-07,3.22945806888098e-07,8.94204203627126e-08,8.66501262981553e-09,-3.61694759374164e-09;2.48120164482384e-06,4.35548336489569e-06,4.45838414237463e-06,2.65786488689568e-06,1.01336319154902e-06,2.76750251625232e-07,7.03012584504661e-08,9.55912991777685e-09,-3.52428088645900e-09;1.08072643597787e-06,2.18302439043424e-06,2.65786488689568e-06,2.34255553290755e-06,1.23327128802898e-06,2.62613072651603e-07,5.54084958657510e-08,5.12445290470492e-09,-1.87123549287140e-09;6.15062544742349e-07,8.95175259670608e-07,1.01336319154902e-06,1.23327128802898e-06,1.08727403476043e-06,2.46135986329531e-07,4.22627038227679e-08,2.20431951198204e-10,-7.95979308097672e-10;3.01722082759326e-07,3.22945806888098e-07,2.76750251625232e-07,2.62613072651603e-07,2.46135986329531e-07,8.50887557986818e-08,1.63365407316538e-08,1.14848642696054e-09,-2.89682825022552e-10;9.09101101100596e-08,8.94204203627126e-08,7.03012584504661e-08,5.54084958657510e-08,4.22627038227679e-08,1.63365407316538e-08,7.16518636118017e-09,8.71599608363612e-10,-1.08344092130150e-12;7.13226536233542e-09,8.66501262981553e-09,9.55912991777685e-09,5.12445290470492e-09,2.20431951198204e-10,1.14848642696054e-09,8.71599608363612e-10,3.00947586648809e-10,5.79265648340309e-12;-1.91160904149773e-09,-3.61694759374164e-09,-3.52428088645900e-09,-1.87123549287140e-09,-7.95979308097672e-10,-2.89682825022552e-10,-1.08344092130150e-12,5.79265648340309e-12,2.51921867670278e-11;];
params.Scoring.GMMinit.Sigma(:,:,4) = [1.70180913340868e-06,2.06668261992355e-06,1.39030510555493e-06,3.81882669748959e-07,1.05703434699407e-07,1.27292292344418e-07,5.17848140087307e-08,4.10988499380924e-09,1.83041107685045e-09;2.06668261992355e-06,2.83658970372891e-06,2.02875472778582e-06,5.90495051726248e-07,1.30986140476431e-07,1.42025566486389e-07,5.02480293308325e-08,4.70850404341096e-09,2.00163797722505e-09;1.39030510555493e-06,2.02875472778582e-06,1.63616289162828e-06,6.17503487968503e-07,1.72206804678260e-07,1.26616288875042e-07,5.19166373148613e-08,4.06970678708567e-09,1.93407876728527e-09;3.81882669748959e-07,5.90495051726248e-07,6.17503487968503e-07,4.03536611903962e-07,1.55390598700990e-07,7.47436568947615e-08,4.10397663310454e-08,2.26858013949286e-09,1.60652475171420e-09;1.05703434699407e-07,1.30986140476431e-07,1.72206804678260e-07,1.55390598700990e-07,1.04391164628062e-07,4.22572154461785e-08,2.28482952640550e-08,1.52127790470014e-09,4.67161353487853e-10;1.27292292344418e-07,1.42025566486389e-07,1.26616288875042e-07,7.47436568947615e-08,4.22572154461785e-08,7.29273553235032e-08,1.73584330903472e-08,-7.03173764814625e-11,3.09753704601737e-10;5.17848140087307e-08,5.02480293308325e-08,5.19166373148613e-08,4.10397663310454e-08,2.28482952640550e-08,1.73584330903472e-08,1.64405809242393e-08,5.47275112557947e-10,2.37023626328318e-10;4.10988499380924e-09,4.70850404341096e-09,4.06970678708567e-09,2.26858013949286e-09,1.52127790470014e-09,-7.03173764814625e-11,5.47275112557947e-10,2.61416052000545e-10,2.45030487719594e-11;1.83041107685045e-09,2.00163797722505e-09,1.93407876728527e-09,1.60652475171420e-09,4.67161353487853e-10,3.09753704601737e-10,2.37023626328318e-10,2.45030487719594e-11,4.35725495404241e-11;];
params.Scoring.GMMinit.Sigma(:,:,5) = [8.42939036651693e-07,7.09145690975517e-07,4.10585358955498e-07,1.63618832372541e-07,8.74205065188283e-08,5.70560204110209e-08,2.32091287993437e-08,1.15231573694948e-09,-1.08890833623145e-09;7.09145690975517e-07,6.99106536970443e-07,4.69158910553646e-07,2.06737628456819e-07,8.66008807739507e-08,4.97522229548945e-08,1.84865562765128e-08,7.87305670702298e-10,-1.11767557305384e-09;4.10585358955498e-07,4.69158910553646e-07,3.76520271051432e-07,1.98778865897984e-07,7.85510477511286e-08,3.67531808068001e-08,1.10542474013834e-08,1.04365478542216e-09,-7.81055275651684e-10;1.63618832372541e-07,2.06737628456819e-07,1.98778865897984e-07,1.40347008247962e-07,6.69732994210836e-08,2.23551034090265e-08,4.23487581415079e-09,1.10835490367842e-09,-3.05646368794882e-10;8.74205065188283e-08,8.66008807739507e-08,7.85510477511286e-08,6.69732994210836e-08,4.94013116684990e-08,1.55335100000672e-08,3.01762632677479e-09,1.22821614193164e-09,7.72440956114671e-11;5.70560204110209e-08,4.97522229548945e-08,3.67531808068001e-08,2.23551034090265e-08,1.55335100000672e-08,8.81815852829659e-09,2.45367675941356e-09,3.49454900026674e-10,1.25236201150300e-11;2.32091287993437e-08,1.84865562765128e-08,1.10542474013834e-08,4.23487581415079e-09,3.01762632677479e-09,2.45367675941356e-09,1.49132718560993e-09,4.40358115178234e-11,-2.47101704163432e-11;1.15231573694948e-09,7.87305670702298e-10,1.04365478542216e-09,1.10835490367842e-09,1.22821614193164e-09,3.49454900026674e-10,4.40358115178234e-11,2.06742290386408e-10,2.81093522220064e-11;-1.08890833623145e-09,-1.11767557305384e-09,-7.81055275651684e-10,-3.05646368794882e-10,7.72440956114671e-11,1.25236201150300e-11,-2.47101704163432e-11,2.81093522220064e-11,3.69580816851926e-11;];
params.Scoring.GMMinit.PComponents = [0.235582791083435,0.148067298852050,0.211981813086952,0.181918787462418,0.222449309515145;];
% GMM end point
params.Scoring.GMMclust = [0.00812009526019139,0.0116251246161410,0.0107005973439480,0.00642379351659442,0.00248666219147668,0.000909618995051502,0.000347570749139938,8.22293693144029e-05,2.78707749365036e-05;0.00609425588594097,0.00837007337968675,0.00736420061759011,0.00503299529104573,0.00262960863924286,0.00142115868405853,0.000520439275225559,0.000123448049611899,3.35926228938710e-05;0.00388239903392241,0.00549942558751268,0.00526923196027110,0.00370482741349266,0.00184319537069624,0.000589332117020189,0.000242618622361572,7.83648706786513e-05,2.74784534048178e-05;0.00302265928862588,0.00382732636834386,0.00282730203741678,0.00142570071172277,0.000824317086962886,0.000554314278975743,0.000292771847839603,8.18324925891467e-05,3.03697448524823e-05;0.00142194216410385,0.00152793022913160,0.00120679155733946,0.000763746178368655,0.000443906801604746,0.000224456547831827,0.000127254040425521,7.15534909763699e-05,3.30384286088583e-05;];
